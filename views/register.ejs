<% layout('layout') -%>
<h2>Inscription</h2>

<% if (message) { %>
  <p style="color: red;"><strong><%= message %></strong></p>
<% } %>

<form id="registerForm" method="post" action="/register">
  <label>Nom d'utilisateur <input name="username" value="<%= username || '' %>" required /></label><br/><br/>
  <label>Mot de passe <input name="password" type="password" required /></label><br/><br/>
  <label>Confirmer le mot de passe <input name="confirmPassword" type="password" required /></label><br/><br/>
  <button id="registerBtn" type="submit">S'inscrire</button>
</form>

<p><a href="/login">Déjà un compte ? Connectez-vous</a></p>

<script>
// Validation côté client
document.getElementById('registerForm').addEventListener('submit', function(e) {
    const username = document.querySelector('input[name="username"]').value;
    const password = document.querySelector('input[name="password"]').value;
    const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;
    
    if (username.length < 3) {
        alert('Le nom d\'utilisateur doit contenir au moins 3 caractères');
        e.preventDefault();
        return;
    }
    
    if (password.length < 6) {
        alert('Le mot de passe doit contenir au moins 6 caractères');
        e.preventDefault();
        return;
    }
    
    if (password !== confirmPassword) {
        alert('Les mots de passe ne correspondent pas');
        e.preventDefault();
        return;
    }
});
</script>
